<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Умная подсветка — WebGL</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div class="wrap">
      <video id="player" crossorigin="anonymous" controls playsinline>
        <source src="video.mp4" type="video/webm" />
      </video>

      <div class="glow g-top" id="g-top"></div>
      <div class="glow g-bottom" id="g-bottom"></div>
      <div class="glow g-left" id="g-left"></div>
      <div class="glow g-right" id="g-right"></div>

      <div class="corner c-tl" id="c-tl"></div>
      <div class="corner c-tr" id="c-tr"></div>
      <div class="corner c-bl" id="c-bl"></div>
      <div class="corner c-br" id="c-br"></div>

      <canvas id="glCanvas" width="8" height="8" style="display: none"></canvas>
    </div>

    <div class="controls">
      <div style="margin-bottom: 8px">
        <strong>Улучшенная подсветка</strong>
      </div>
      <div class="row">
        <button id="toggle" class="btn">Выкл</button>
        <input id="file" type="file" accept="video/*" />
      </div>
      <label>
        Интенсивность
        <input
          id="intensity"
          type="range"
          min="0"
          max="2"
          step="0.05"
          value="1"
        />
      </label>
      <label>
        Частота (мс)
        <input id="freq" type="range" min="30" max="300" step="10" value="80" />
      </label>
      <label>
        Фильтр:
        <select id="filterMode">
          <option value="avg">Усреднение</option>
          <option value="bright">Только яркие</option>
          <option value="saturated">Только насыщенные</option>
        </select>
      </label>
      <div style="font-size: 12px; margin-top: 6px; color: #aaa">
        WebGL downsample (8×8) + EMA сглаживание для низкой нагрузки CPU.
      </div>
    </div>

    <script type="module" src="index.js"></script>
  </body>
</html>
